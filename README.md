# deepSearch
---
## ğŸ“Œ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå·¥ä¸šçº§ **å€’æ’ç´¢å¼•æœç´¢å¼•æ“**ï¼Œå¹¶æ‰©å±•äº† **è®°å¿†æ¨¡å— (Memory Module)**ã€‚
ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

1. **å¹¶è¡Œæ„å»ºå€’æ’ç´¢å¼•**ï¼ˆæ”¯æŒå¤§è§„æ¨¡æ–‡æœ¬é›†åˆï¼‰
2. **å¸ƒå°”æ£€ç´¢ã€çŸ­è¯­æ£€ç´¢**
3. **BM25 æ’åºæœºåˆ¶**
4. **å†…å­˜å‹ç¼©ä¸æŒä¹…åŒ–å­˜å‚¨**
5. **åŸºäºæœç´¢ç»“æœçš„è®°å¿†æŠ½å–ä¸å‹ç¼©**
6. **ç»“åˆè®°å¿†ä¸æœ€æ–°æœç´¢ç»“æœçš„ QA é—®ç­”æ¨¡å—**

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
deepsearch/
â”œâ”€ app/
â”‚  â”œâ”€ main.py
â”‚  â”œâ”€ config.py
â”‚  â”œâ”€ schemas.py
â”‚  â””â”€ deps.py
â”‚
â”œâ”€ deepsearch/
â”‚  â”œâ”€ __init__.py
â”‚  â”œâ”€ callbacks.py
â”‚  â”œâ”€ utils.py
â”‚  â”œâ”€ loaders.py
â”‚  â”œâ”€ splitter.py
â”‚  â”œâ”€ embeddings.py
â”‚  â”œâ”€ vectorstore.py
â”‚  â”œâ”€ bm25_index.py
â”‚  â”œâ”€ hybrid_retriever.py
â”‚  â”œâ”€ rag_chain.py
â”‚  â”œâ”€ memory_store.py              # â­ æ–°å¢ï¼šè®°å¿†å‘é‡åº“ï¼ˆFAISSï¼‰
â”‚  â”œâ”€ agent.py
â”‚  â””â”€ tools/
â”‚     â”œâ”€ web_search.py
â”‚     â”œâ”€ confidence.py
â”‚     â”œâ”€ query_rewrite.py
â”‚     â””â”€ memory.py                 # â­ æ–°å¢ï¼šç›¸å…³è®°å¿†æå–/æ£€ç´¢/å‹ç¼© å·¥å…·
â”‚
â”œâ”€ prompts/
â”‚  â”œâ”€ query_rewrite.md
â”‚  â”œâ”€ rag_answer.md                # â­ æ›´æ–°ï¼šæ”¯æŒ memory æ®µ
â”‚  â”œâ”€ confidence.md
â”‚  â”œâ”€ memory_extract.md            # â­ æ–°å¢ï¼šä»æ£€ç´¢ç»“æœä¸­æå–å¯å­˜å‚¨è®°å¿†
â”‚  â””â”€ memory_compress.md           # â­ æ–°å¢ï¼šå‹ç¼©è®°å¿†ä¸ºç´§å‡‘ä¸Šä¸‹æ–‡
â”‚
â”œâ”€ scripts/
â”‚  â””â”€ build_indices.py
â”‚
â”œâ”€ data/
â”‚  â””â”€ pdf/
â”œâ”€ model/
â”œâ”€ stores/
â”‚  â”œâ”€ faiss/
â”‚  â”œâ”€ bm25/
â”‚  â””â”€ memory/                      # â­ æ–°å¢ï¼šè®°å¿†å‘é‡åº“æŒä¹…åŒ–
â””â”€ requirements.txt
```

---

## âš™ï¸ å®‰è£…ä¸ä¾èµ–

è¯·ç¡®ä¿ Python ç‰ˆæœ¬ â‰¥ **3.9**ã€‚
å®‰è£…ä¾èµ–ï¼š

```bash
pip install -r requirements.txt
```

ä¸»è¦ä¾èµ–ï¼š

* `nltk` â†’ åˆ†è¯ã€åœç”¨è¯ã€è¯å¹²åŒ–
* `loguru` â†’ æ—¥å¿—æ‰“å°
* `tqdm` â†’ è¿›åº¦æ¡
* `scikit-learn` â†’ ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆè®°å¿†å‹ç¼©ï¼‰

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ„å»ºç´¢å¼•

åœ¨ `data/` æ–‡ä»¶å¤¹ä¸­æ”¾ç½®å¤šä¸ª `.txt` æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¿è¡Œï¼š

```bash
python src/main.py --mode build
```

è¾“å‡ºï¼š

* ç”Ÿæˆ `index/main_index.json`ï¼ˆå­˜å‚¨å€’æ’ç´¢å¼•ï¼‰
* æ‰“å°æ—¥å¿—ï¼ˆæ„å»ºè¿›åº¦ã€è¯é¡¹æ•°é‡ã€ç´¢å¼•å¤§å°ç­‰ï¼‰

---

### 2. æœç´¢

æ‰§è¡Œæœç´¢å‘½ä»¤ï¼š

```bash
python src/main.py --mode search --query "artificial intelligence in finance"
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸ” æœç´¢æŸ¥è¯¢: artificial intelligence in finance
âœ… åŒ¹é…æ–‡æ¡£æ•°: 12
ğŸ† Top 3 ç»“æœ:
  [Doc 3] ... sentence snippet ...
  [Doc 8] ... sentence snippet ...
  [Doc 11] ... sentence snippet ...
```

---

### 3. æœç´¢ + è®°å¿†æŠ½å–

è¿è¡Œå¸¦è®°å¿†åŠŸèƒ½çš„æœç´¢ï¼š

```bash
python src/main.py --mode search --query "deep learning applications"
```

æµç¨‹ï¼š

1. **å…ˆæ‰§è¡Œå€’æ’ç´¢å¼•æœç´¢**
2. **è°ƒç”¨è®°å¿†æ¨¡å—**ï¼šä» `memory_store.json` æå–å†å²ç›¸å…³ä¿¡æ¯
3. **å‹ç¼©è®°å¿†**ï¼ˆç›¸ä¼¼æ€§èšåˆï¼‰
4. **ç»“åˆæœç´¢ç»“æœ + è®°å¿†è¿›è¡Œ QA**

è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸ” æœç´¢æŸ¥è¯¢: deep learning applications
âœ… åŒ¹é…æ–‡æ¡£æ•°: 8
ğŸ§  æå–ç›¸å…³è®°å¿†æ•°: 3
ğŸ“¦ å‹ç¼©åè®°å¿†æ•°: 1
ğŸ’¡ ç»¼åˆå›ç­”:
  Deep learning has been applied in areas such as computer vision,
  natural language processing, and finance...
```

---

### 4. æŸ¥çœ‹è®°å¿†å†…å®¹

è¿è¡Œï¼š

```bash
python src/main.py --mode memory
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸ§  å½“å‰è®°å¿†å­˜å‚¨:
1. Deep learning is widely applied in NLP and finance.
2. Inverted index improves efficiency in text retrieval.
```

---

### 5. æ¸…ç†ç´¢å¼•ä¸è®°å¿†

```bash
rm -rf index/*.json
```

---

## ğŸ§ª æµ‹è¯•ä¸éªŒè¯

å¯æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼š

```bash
pytest tests/
```

æµ‹è¯•è¦†ç›–ï¼š

* å€’æ’ç´¢å¼•æ„å»ºæ­£ç¡®æ€§
* BM25 æ’åºæ˜¯å¦ç¬¦åˆé¢„æœŸ
* è®°å¿†æŠ½å–ä¸å‹ç¼©é€»è¾‘
* QA æ¨¡å—è¾“å‡ºåˆç†æ€§

---

## ğŸ”‘ æ ¸å¿ƒè®¾è®¡äº®ç‚¹

* **å·¥ä¸šçº§å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¹¶è¡Œæ„å»º + åˆ†æ®µåˆå¹¶ç´¢å¼•
* **å¯è§£é‡Šæ€§**ï¼šå¸ƒå°”æ£€ç´¢ + çŸ­è¯­åŒ¹é… + BM25 æ’åº
* **è®°å¿†å¢å¼º**ï¼šç»“åˆå†å²æœç´¢ä¸Šä¸‹æ–‡ï¼Œæé«˜ QA è¿è´¯æ€§
* **é«˜é²æ£’æ€§**ï¼šè¾¹ç•Œæ£€æŸ¥ã€å¼‚å¸¸å¤„ç†ã€æ—¥å¿—è¿½è¸ª

---

## ğŸ“Œ ç¤ºä¾‹æµç¨‹å›¾

```
ç”¨æˆ· Query â†’ æœç´¢å¼•æ“ â†’ å€’æ’ç´¢å¼•ç»“æœ
                         â†“
                    è®°å¿†æ¨¡å—æå–
                         â†“
                   è®°å¿†å‹ç¼©ä¸åˆå¹¶
                         â†“
               QA æ¨¡å—ç”Ÿæˆç»¼åˆå›ç­”
```

---

## ğŸ“œ è®¸å¯è¯

MIT License

---